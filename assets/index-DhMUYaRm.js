(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();class u{constructor(){this.dbName="MathQuizDB",this.version=1,this.db=null}async init(){return new Promise((t,s)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>s(n.error),n.onsuccess=()=>{this.db=n.result,t(this.db)},n.onupgradeneeded=e=>{const r=e.target.result;r.objectStoreNames.contains("questions")||r.createObjectStore("questions",{keyPath:"id"}),r.objectStoreNames.contains("settings")||r.createObjectStore("settings",{keyPath:"key"})}})}async storeQuestions(t){const s=this.db.transaction(["questions"],"readwrite"),n=s.objectStore("questions");return t.forEach(e=>{n.put(e)}),new Promise(e=>{s.oncomplete=()=>e()})}async getQuestionsByCategory(t){const e=this.db.transaction(["questions"],"readonly").objectStore("questions").getAll();return new Promise(r=>{e.onsuccess=()=>{const i=e.result.filter(c=>t.includes(c.category));r(i)}})}}const a=[{id:1,category:"arithmetic",question:"What is 15 + 27?",correctAnswer:"42",incorrectAnswers:["38","45","32"]},{id:2,category:"arithmetic",question:"What is ¾ of 100?",correctAnswer:"75",incorrectAnswers:["25","50","100"]},{id:3,category:"algebra",question:"Solve for x: 2x + 5 = 15",correctAnswer:"5",incorrectAnswers:["10","7.5","3"]},{id:4,category:"algebra",question:"Simplify: (x² + 3x) - (2x² - x)",correctAnswer:"-x² + 4x",incorrectAnswers:["3x² + 2x","x² + 4x","-x² + 2x"]},{id:5,category:"geometry",question:"What is the area of a circle with radius 5?",correctAnswer:"25π",incorrectAnswers:["10π","50π","100π"]},{id:6,category:"geometry",question:"How many degrees in a triangle?",correctAnswer:"180",incorrectAnswers:["90","360","270"]}],l={questions:a};class d{constructor(){this.db=new u,this.currentQuestionIndex=0,this.score=0,this.selectedCategories=["arithmetic"],this.questions=[],this.currentQuestion=null,this.initializeApp()}async initializeApp(){try{await this.db.init(),await this.loadQuestions(),this.setupEventListeners()}catch(t){console.error("Failed to initialize app:",t)}}async loadQuestions(){await this.db.storeQuestions(l.questions)}setupEventListeners(){document.querySelectorAll(".category input").forEach(t=>{t.addEventListener("change",s=>{s.target.checked?this.selectedCategories.push(s.target.value):this.selectedCategories=this.selectedCategories.filter(n=>n!==s.target.value)})}),document.getElementById("start-quiz").addEventListener("click",()=>{this.startQuiz()}),document.getElementById("next-question").addEventListener("click",()=>{this.nextQuestion()}),document.getElementById("restart-quiz").addEventListener("click",()=>{this.showScreen("category-selection")})}async startQuiz(){if(this.selectedCategories.length===0){alert("Please select at least one category");return}if(this.questions=await this.db.getQuestionsByCategory(this.selectedCategories),this.questions.length===0){alert("No questions found for selected categories");return}this.shuffleArray(this.questions),this.currentQuestionIndex=0,this.score=0,this.showScreen("quiz-screen"),this.displayQuestion()}displayQuestion(){this.currentQuestion=this.questions[this.currentQuestionIndex],document.getElementById("question-number").textContent=`Question ${this.currentQuestionIndex+1}/${this.questions.length}`,document.getElementById("score").textContent=`Score: ${this.score}`,document.getElementById("question").textContent=this.currentQuestion.question;const t=[this.currentQuestion.correctAnswer,...this.currentQuestion.incorrectAnswers];this.shuffleArray(t);const s=document.getElementById("answers");s.innerHTML="",t.forEach(n=>{const e=document.createElement("div");e.className="answer",e.textContent=n,e.addEventListener("click",()=>this.selectAnswer(n)),s.appendChild(e)}),document.getElementById("next-question").style.display="none"}selectAnswer(t){const s=document.querySelectorAll(".answer"),n=this.currentQuestion.correctAnswer;s.forEach(e=>{e.style.pointerEvents="none",e.textContent===n?e.classList.add("correct"):e.textContent===t&&t!==n&&e.classList.add("incorrect"),e.textContent===t&&e.classList.add("selected")}),t===n&&(this.score++,document.getElementById("score").textContent=`Score: ${this.score}`),document.getElementById("next-question").style.display="block"}nextQuestion(){this.currentQuestionIndex++,this.currentQuestionIndex<this.questions.length?this.displayQuestion():this.showResults()}showResults(){this.showScreen("results-screen"),document.getElementById("final-score").textContent=`Your score: ${this.score}/${this.questions.length}`}showScreen(t){document.querySelectorAll(".screen").forEach(s=>{s.classList.remove("active")}),document.getElementById(t).classList.add("active")}shuffleArray(t){for(let s=t.length-1;s>0;s--){const n=Math.floor(Math.random()*(s+1));[t[s],t[n]]=[t[n],t[s]]}}}document.addEventListener("DOMContentLoaded",()=>{new d});
